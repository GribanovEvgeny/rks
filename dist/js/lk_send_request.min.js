"use strict";$(document).ready(function(){var e,t,n=$("body"),r=!1;function o(){document.querySelectorAll(".__select").forEach(function(n){var a=n.querySelector(".__select__title"),e=n.querySelectorAll(".__select__label");a.addEventListener("click",function(){"active"===n.getAttribute("data-state")?n.setAttribute("data-state",""):n.setAttribute("data-state","active")});for(var t=0;t<e.length;t++)e[t].addEventListener("click",function(e){a.textContent=e.target.textContent,a.value=e.target.textContent,n.setAttribute("data-state","");var t=this.parentNode.parentNode.parentNode.parentNode.parentNode;t.querySelector(".address__concated")&&l(t)});document.querySelector("body").addEventListener("click",function(e){var t=e.target.classList;"__select__title"!==t[0]&&"__select__content"!==t[0]&&"__select__input"!==t[0]&&n.setAttribute("data-state","")})})}function l(e){var t=e.querySelector(".address__concated"),n=e.querySelector(".address__locality"),a=e.querySelector(".address__district"),c=e.querySelector(".address__microdistrict"),r=e.querySelector(".address__street"),o=e.querySelector(".address__housing"),l=e.querySelector(".address__house");setTimeout(function(){t.textContent="\n                              ".concat(n.value?"г. "+n.value:"","\n                              ").concat(a.value?", "+a.value+" район":"","\n                              ").concat(c.value?", микрорайон "+c.value:"","\n                              ").concat(r.value?", ул. "+r.value:"","\n                              ").concat(o.value?", корпус "+o.value:"","\n                              ").concat(l.value?", дом "+l.value:"","\n                              ",".","\n                             ")},100)}function u(e){e.querySelector(".address__concated");var t=e.querySelector(".address__locality"),n=e.querySelector(".address__district"),a=e.querySelector(".address__microdistrict"),c=e.querySelector(".address__street"),r=e.querySelector(".address__housing"),o=e.querySelector(".address__house");t&&t.addEventListener("change",function(){return l(e)}),n&&n.addEventListener("change",function(){return l(e)}),a&&a.addEventListener("change",function(){return l(e)}),c&&c.addEventListener("change",function(){return l(e)}),r&&r.addEventListener("change",function(){return l(e)}),o&&o.addEventListener("change",function(){return l(e)})}document.querySelector(".requests_form.simple")&&(r=!0),document.querySelector(".slider")&&$(".slider").slick({nextArrow:'<button type="button" class="slick-arrow slick-next btn dark_btn">Далее</button>',prevArrow:'<button type="button" class="slick-arrow slick-prev btn">Назад</button>',dots:!0,infinite:!1,draggable:!1,adaptiveHeight:!0}),$(".radio").parent().click(function(){$(this).children(".radio").prop("checked",!0)}),document.querySelector(".checkbox")&&(e=$(".checkbox"),t=e.parent(),e.click(function(){var e=$(this),t=e.is(":checked");e.prop("checked",!t)}),t.click(function(){var e=$(this).children(),t=e.is(":checked");e.prop("checked",!t)})),document.querySelector(".__select")&&o(document);var a,c,i,d,s=document.querySelectorAll(".address__concated");function _(e,t){var n=document.querySelector(".slick-list"),a=Number.parseInt(n.style.height);return n.style.height="increase"===e?a+t+"px":a-t+"px"}s&&s.forEach(function(e){return u(e.parentNode.parentNode.parentNode)}),document.querySelector('input[name="queue_launch"]')&&$('input[name="queue_launch"]').parent().click(function(){var e=$(".queue_launch_"+$(this).children().val());$(".queue_launch").not(e).hide(0),e.fadeIn(300)}),document.querySelector(".instructions__btn")&&(a=$(".instructions__btn"),c=$(".modal_instructions"),i=$(".modal_instructions__content"),d=$(".modal_instructions .close"),a.click(function(e){e.preventDefault(),n.css("overflow","hidden"),i.css("overflow-y","auto"),i.css("overflow-x","hidden"),c.removeClass("hidden")}),d.click(function(e){e.preventDefault(),n.css("overflow","auto"),c.addClass("hidden")})),document.querySelector(".queue_launch_yes")&&function(){var a=-1;function c(){var e,t,n=document.querySelector(".queue_block").cloneNode(!0);(e=n).querySelector(".form__subheader").innerText="Очередь №".concat(a),e.querySelectorAll("input").forEach(function(e){var t;e.name&&(t=e.name,t+="_".concat(a),e.name=t)}),t=n,document.querySelector(".step_5 .queue_slider").append(t),o(n.querySelector(".__select")),console.log(n.querySelector(".__select")),L(n),E(n),u(n)}!function(){var e=document.querySelectorAll(".queue_launch_yes .field__table .table__body .table__row");if(!e.length)return console.log("Не найдены строки очередей в таблице .queue_launch_yes .field__table");e.forEach(function(e){return a+=1})}();var r=$(".queue_launch_yes tbody");$(".queue_btn").click(function(e){e.preventDefault();var t='\n                      <tr class="table__row">\n                        <td class="table__cell">Очередь №'.concat(a+=1,'</td>\n                        <td class="table__cell">\n                          <input type="text" class="field__input datepicker_input" placeholder="Введите данные" />\n                        </td>\n                      </tr>\n                     ');r.append(t),c(),_("increase",39);var n=r.children().last().find(".datepicker_input");n.datepicker($.datepicker.regional.ru),n.mask("99.99.9999",{autoclear:!1})}),$(".queue_btn_remove").click(function(e){e.preventDefault(),1<=a&&(--a,r.children().last().remove(),$(".step_5 .queue_slider").children().last().remove(),_("decrease",39),$(".queue_slider").slick("slickRemove"))})}();var p=$(".other_water_sources tbody"),m=2;$(".add_source_btn").click(function(e){e.preventDefault(),p.append('\n                    <tr class="table__row">\n                      <td class="table__cell">\n                        <input type="text" class="field__input" placeholder="Введите данные" />\n                      </td>\n                      <td class="table__cell">\n                        <input type="text" class="field__input" placeholder="Введите данные" />\n                      </td>\n                      <td class="table__cell">\n                        <input type="text" class="field__input" placeholder="Введите данные" />\n                      </td>\n                    </tr>\n                   '),m++,_("increase",39)}),$(".add_source_btn_remove").click(function(e){e.preventDefault(),2<m&&(p.children().last().remove(),m--,_("decrease",39))});var v,h,f,y,q,k,b,S=$(".land_coverage_characteristics tbody"),g=2;function L(e){var t=e.querySelector(".connection_to_cold_water"),n=t.parentNode,a=t.checked,c=e.querySelector(".cold_water_supply_toggle");a&&c.classList.remove("hidden"),a||c.classList.add("hidden"),n.addEventListener("click",function(){var e=r?300:1e3;(a=!a)?(c.classList.remove("hidden"),_("increase",e)):(c.classList.add("hidden"),_("decrease",e))})}$(".add_coverage_btn").click(function(e){e.preventDefault();S.append('\n                    <tr class="table__row">\n                      <td class="table__cell">\n                        <input type="text" class="field__input" placeholder="Введите данные" />\n                      </td>\n                      <td class="table__cell">\n                        <input type="text" class="field__input" placeholder="Введите данные" />\n                      </td>\n                    </tr>\n                   '),g++,_("increase",39)}),$(".add_coverage_btn_remove").click(function(e){e.preventDefault(),2<g&&(S.children().last().remove(),g--,_("decrease",39))}),document.querySelector(".datepicker_input")&&$(".datepicker_input").datepicker($.datepicker.regional.ru),document.querySelector(".datepicker_input")&&$(".datepicker_input").mask("99.99.9999",{autoclear:!1}),document.querySelector(".snils_input")&&$(".snils_input").mask("999-999-999 99",{autoclear:!1}),document.querySelector(".passport_input")&&$(".passport_input").mask("99 99 / 999999",{autoclear:!1}),document.querySelector(".passport_serial_input")&&$(".passport_serial_input").mask("99 99",{autoclear:!1}),document.querySelector(".passport_number_input")&&$(".passport_number_input").mask("999999",{autoclear:!1}),document.querySelector(".phone_input")&&$(".phone_input").mask("(999) 999-9999",{autoclear:!1}),document.querySelector(".tin_ul_input")&&$(".tin_ul_input").mask("9999999999",{autoclear:!1}),document.querySelector(".tin_fl_input")&&$(".tin_fl_input").mask("999999999999",{autoclear:!1}),document.querySelector(".tin_e_input")&&$(".tin_e_input").mask("999999999999",{autoclear:!1}),document.querySelector(".integer_input")&&$(".integer_input").on("input",function(){$(this).val($(this).val().replace(/[^0-9]/g,""))}),document.querySelector(".float_input")&&$(".float_input").keypress(function(e){46==e.which&&-1==$(this).val().indexOf(".")||!(e.which<48||57<e.which)||e.preventDefault()}),document.querySelector(".representative")&&(v=document.querySelector(".representative"),h=v.querySelector(".yes"),f=h.checked,y=h.parentNode,q=v.querySelector(".no"),k=q.parentNode,b=document.querySelector(".representative_add_docs_block"),f&&b.classList.remove("hidden"),f||b.classList.add("hidden"),h.addEventListener("click",function(){return b.classList.remove("hidden")}),y.addEventListener("click",function(){return b.classList.remove("hidden")}),q.addEventListener("click",function(){return b.classList.add("hidden")}),k.addEventListener("click",function(){return b.classList.add("hidden")}));var x=document.querySelectorAll(".queue_block");function E(e){var t=e.querySelector(".connection_to_drainage"),n=t.parentNode,a=t.checked,c=e.querySelector(".drainage_toggle");a&&c.classList.remove("hidden"),a||c.classList.add("hidden"),n.addEventListener("click",function(){(a=!a)?(c.classList.remove("hidden"),_("increase",750)):(c.classList.add("hidden"),_("decrease",750))})}function w(e){return e.siblings(".required").text()}x&&x.forEach(L),x&&x.forEach(E),"10002"==$('input[name="requesttype_id"]').val()&&$('input[name="personbasis"][value="05"]').parent().attr("style","display:none;");var N=$("form");$("input[type='submit']").click(function(e){switch($(document.activeElement,this).attr("name")){case"ecp_button":e.preventDefault(),e.stopPropagation();var t=[];if(N.find(".required + *").each(function(){var e=$(this);switch(e.prop("tagName")){case"SPAN":0==e.find("input:checked").length&&t.push("Не выбрано ни одно значение поля "+w(e));break;case"INPUT":!e.val()&&e.is(":visible")&&t.push("Не указано значение поля "+w(e));break;case"DIV":e.find(".attachment").length;!e.is(":visible")||"Выберите тип документа"!=e.find(".__select__title").text()&&"Полученный адрес"!=e.text()||t.push("Не указано значение поля "+w(e))}}),t.length)return $(".modal.modal_alert.autopopup.hidden .modal__text").text(t[0]),void $(".modal.modal_alert.autopopup.hidden").removeClass("hidden");(N=$(this).closest("form")).append("<input type='hidden' name='ecp' value='true' />"),N.submit();break;case"save_button":$('input[name="redirect"]').val("newrequesttp")}}),$.ajax({url:"/lktp/getSimpleJson/",success:function(e){"true"==e&&$("[name='infmaxparam4'],[name='infmaxparam3'],[name='connectloadparamdata_value2'],[name='addconnectloadparamdata_value_05'],[name='addconnectloadparamdata_value_08'],[name='addconnectloadparamdata_value_02'],[name='addconnectloadparamdata_value_07'],[name='connectloadparamdata_value2_2'],[name='addconnectloadparamdata_value_06'],[name='connectloadparamdata_value3'],[name='connectloadparamdata_value1'].mh,[name='connectloadparamdata_value1_2'].mh,#needToHide,#typeOfConnectionObject label:contains('Реконструкция') input,[name='infmaxparam2']").parent().hide()}})});